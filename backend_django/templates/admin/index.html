{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrahead %}
{{ block.super }}
<style>
    :root {
        --primary: #4f46e5;
        --secondary: #6366f1;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --info: #3b82f6;
        --purple: #8b5cf6;
        --bg-card: #ffffff;
        --text-main: #1f2937;
        --text-muted: #6b7280;
    }

    .dashboard-container {
        padding: 24px 0;
        font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
        padding-bottom: 12px;
        border-bottom: 2px solid #e5e7eb;
    }

    .section-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-main);
        margin: 0;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 24px;
        margin-bottom: 48px;
    }

    .stat-card {
        background: var(--bg-card);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        border: 1px solid #e5e7eb;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none !important;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        border-color: var(--primary);
    }

    .stat-card:hover::before {
        opacity: 1;
    }

    .stat-icon-wrapper {
        width: 56px;
        height: 56px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        color: white;
        margin-bottom: 16px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .stat-value {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--text-main);
        line-height: 1.2;
        margin-bottom: 4px;
    }

    .stat-label {
        font-size: 0.95rem;
        color: var(--text-muted);
        font-weight: 500;
    }
    
    .stat-footer {
        margin-top: auto;
        padding-top: 16px;
        font-size: 0.85rem;
        color: var(--primary);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 6px;
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.3s ease;
    }
    
    .stat-card:hover .stat-footer {
        opacity: 1;
        transform: translateY(0);
    }

    /* Gradients */
    .bg-blue { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
    .bg-indigo { background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); }
    .bg-green { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .bg-yellow { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    .bg-red { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
    .bg-purple { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
    .bg-pink { background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); }

    /* Action Buttons */
    .action-btn {
        background: var(--primary);
        color: white;
        padding: 10px 20px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        transition: background 0.2s;
    }
    .action-btn:hover {
        background: var(--secondary);
    }

</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    
    <!-- Job Operations Section -->
    <div class="section-header">
        <h2 class="section-title">
            <i class="fas fa-briefcase" style="color: var(--primary);"></i>
            Job Management
        </h2>
        <a href="/admin/autoscraper/scrapersource/" class="action-btn">
            <i class="fas fa-cloud-download-alt"></i> Fetch New Jobs
        </a>
    </div>

    <div class="stats-grid">
        <!-- Live Jobs -->
        <a href="/admin/core/job/?status__exact=published" class="stat-card">
            <div class="stat-icon-wrapper bg-green">
                <i class="fas fa-globe"></i>
            </div>
            <div class="stat-value">{{ dashboard_stats.jobs_internal_published }}</div>
            <div class="stat-label">Live Jobs on Website</div>
            <div class="stat-footer">View Details <i class="fas fa-arrow-right"></i></div>
        </a>

        <!-- Draft Jobs -->
        <a href="/admin/core/job/?status__exact=draft" class="stat-card">
            <div class="stat-icon-wrapper bg-yellow">
                <i class="fas fa-edit"></i>
            </div>
            <div class="stat-value">{{ dashboard_stats.jobs_internal_draft }}</div>
            <div class="stat-label">Draft Jobs (Unpublished)</div>
            <div class="stat-footer">Manage Drafts <i class="fas fa-arrow-right"></i></div>
        </a>

        <!-- New Scraped Jobs -->
        <a href="/admin/autoscraper/scrapedjob/?status__exact=new" class="stat-card">
            <div class="stat-icon-wrapper bg-red">
                <i class="fas fa-bolt"></i>
            </div>
            <div class="stat-value">{{ dashboard_stats.jobs_scraped_new }}</div>
            <div class="stat-label">New Scraped Jobs</div>
            <div class="stat-footer">Review & Approve <i class="fas fa-arrow-right"></i></div>
        </a>

        <!-- Total Scraped -->
        <a href="/admin/autoscraper/scrapedjob/" class="stat-card">
            <div class="stat-icon-wrapper bg-purple">
                <i class="fas fa-database"></i>
            </div>
            <div class="stat-value">{{ dashboard_stats.jobs_scraped_total }}</div>
            <div class="stat-label">Total Scraped History</div>
            <div class="stat-footer">View All <i class="fas fa-arrow-right"></i></div>
        </a>
    </div>

    <!-- User Overview Section -->
    <div class="section-header">
        <h2 class="section-title">
            <i class="fas fa-users" style="color: var(--info);"></i>
            User Overview
        </h2>
        <a href="/admin/auth/user/" class="action-btn" style="background: var(--info);">
            <i class="fas fa-user-cog"></i> Manage Users
        </a>
    </div>

    <div class="stats-grid">
        <!-- Total Users -->
        <a href="/admin/auth/user/" class="stat-card">
            <div class="stat-icon-wrapper bg-blue">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-value">{{ dashboard_stats.users_total }}</div>
            <div class="stat-label">Total Users</div>
            <div class="stat-footer">Manage Users <i class="fas fa-arrow-right"></i></div>
        </a>

        <!-- Employers -->
        <a href="/admin/core/employeruser/" class="stat-card">
            <div class="stat-icon-wrapper bg-indigo">
                <i class="fas fa-building"></i>
            </div>
            <div class="stat-value">{{ dashboard_stats.users_employers }}</div>
            <div class="stat-label">Active Employers</div>
            <div class="stat-footer">View Employers <i class="fas fa-arrow-right"></i></div>
        </a>

        <!-- Job Seekers -->
        <a href="/admin/core/jobseekeruser/" class="stat-card">
            <div class="stat-icon-wrapper bg-pink">
                <i class="fas fa-user-graduate"></i>
            </div>
            <div class="stat-value">{{ dashboard_stats.users_jobseekers }}</div>
            <div class="stat-label">Job Seekers</div>
            <div class="stat-footer">View Seekers <i class="fas fa-arrow-right"></i></div>
        </a>
    </div>

</div>
{% endblock %}
